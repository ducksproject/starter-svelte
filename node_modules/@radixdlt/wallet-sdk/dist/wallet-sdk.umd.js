(function(p,M){typeof exports=="object"&&typeof module<"u"?M(exports):typeof define=="function"&&define.amd?define(["exports"],M):(p=typeof globalThis<"u"?globalThis:p||self,M(p["wallet-sdk"]={}))})(this,function(p){"use strict";var Ci=Object.defineProperty;var $i=(p,M,L)=>M in p?Ci(p,M,{enumerable:!0,configurable:!0,writable:!0,value:L}):p[M]=L;var Ne=(p,M,L)=>($i(p,typeof M!="symbol"?M+"":M,L),L);var M=function(t,e){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},M(t,e)};function L(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");M(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Bn(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(w){o(w)}}function c(l){try{u(r.throw(l))}catch(w){o(w)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function Lt(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Te(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function le(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function de(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function Se(t){return this instanceof Se?(this.v=t,this):new Se(t)}function Vn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(y){r[y]&&(s[y]=function(T){return new Promise(function(j,m){i.push([y,T,j,m])>1||a(y,T)})})}function a(y,T){try{c(r[y](T))}catch(j){w(i[0][3],j)}}function c(y){y.value instanceof Se?Promise.resolve(y.value.v).then(u,l):w(i[0][2],y)}function u(y){a("next",y)}function l(y){a("throw",y)}function w(y,T){y(T),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Fn(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Te=="function"?Te(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(o){return new Promise(function(a,c){o=t[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function $(t){return typeof t=="function"}function tt(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var nt=tt(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,s){return s+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function qe(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ee=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,s,i;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Te(o),c=a.next();!c.done;c=a.next()){var u=c.value;u.remove(this)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if($(l))try{l()}catch(m){i=m instanceof nt?m.errors:[m]}var w=this._finalizers;if(w){this._finalizers=null;try{for(var y=Te(w),T=y.next();!T.done;T=y.next()){var j=T.value;try{Dt(j)}catch(m){i=i??[],m instanceof nt?i=de(de([],le(i)),le(m.errors)):i.push(m)}}}catch(m){r={error:m}}finally{try{T&&!T.done&&(s=y.return)&&s.call(y)}finally{if(r)throw r.error}}}if(i)throw new nt(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Dt(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&qe(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&qe(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),Ut=Ee.EMPTY;function Zt(t){return t instanceof Ee||t&&"closed"in t&&$(t.remove)&&$(t.add)&&$(t.unsubscribe)}function Dt(t){$(t)?t():t.unsubscribe()}var rt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},st={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=st.delegate;return s!=null&&s.setTimeout?s.setTimeout.apply(s,de([t,e],le(n))):setTimeout.apply(void 0,de([t,e],le(n)))},clearTimeout:function(t){var e=st.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Wt(t){st.setTimeout(function(){throw t})}function it(){}var Be=null;function Ve(t){if(rt.useDeprecatedSynchronousErrorHandling){var e=!Be;if(e&&(Be={errorThrown:!1,error:null}),t(),e){var n=Be,r=n.errorThrown,s=n.error;if(Be=null,r)throw s}}else t()}var ot=function(t){L(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,Zt(n)&&n.add(r)):r.destination=Yn,r}return e.create=function(n,r,s){return new Oe(n,r,s)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Ee),zn=Function.prototype.bind;function at(t,e){return zn.call(t,e)}var Hn=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Fe(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Fe(r)}else Fe(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Fe(n)}},t}(),Oe=function(t){L(e,t);function e(n,r,s){var i=t.call(this)||this,o;if($(n)||!n)o={next:n??void 0,error:r??void 0,complete:s??void 0};else{var a;i&&rt.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return i.unsubscribe()},o={next:n.next&&at(n.next,a),error:n.error&&at(n.error,a),complete:n.complete&&at(n.complete,a)}):o=n}return i.destination=new Hn(o),i}return e}(ot);function Fe(t){Wt(t)}function Kn(t){throw t}var Yn={closed:!0,next:it,error:Kn,complete:it},ut=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ze(t){return t}function Gn(t){return t.length===0?ze:t.length===1?t[0]:function(n){return t.reduce(function(r,s){return s(r)},n)}}var B=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var s=this,i=Xn(e)?e:new Oe(e,n,r);return Ve(function(){var o=s,a=o.operator,c=o.source;i.add(a?a.call(i,c):c?s._subscribe(i):s._trySubscribe(i))}),i},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=qt(n),new n(function(s,i){var o=new Oe({next:function(a){try{e(a)}catch(c){i(c),o.unsubscribe()}},error:i,complete:s});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[ut]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return Gn(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=qt(e),new e(function(r,s){var i;n.subscribe(function(o){return i=o},function(o){return s(o)},function(){return r(i)})})},t.create=function(e){return new t(e)},t}();function qt(t){var e;return(e=t??rt.Promise)!==null&&e!==void 0?e:Promise}function Jn(t){return t&&$(t.next)&&$(t.error)&&$(t.complete)}function Xn(t){return t&&t instanceof ot||Jn(t)&&Zt(t)}function Qn(t){return $(t==null?void 0:t.lift)}function V(t){return function(e){if(Qn(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function F(t,e,n,r,s){return new er(t,e,n,r,s)}var er=function(t){L(e,t);function e(n,r,s,i,o,a){var c=t.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=r?function(u){try{r(u)}catch(l){n.error(l)}}:t.prototype._next,c._error=i?function(u){try{i(u)}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=s?function(){try{s()}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(ot),tr=tt(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),te=function(t){L(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new Bt(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new tr},e.prototype.next=function(n){var r=this;Ve(function(){var s,i;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=Te(r.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(n)}}catch(u){s={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}}})},e.prototype.error=function(n){var r=this;Ve(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var s=r.observers;s.length;)s.shift().error(n)}})},e.prototype.complete=function(){var n=this;Ve(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,s=this,i=s.hasError,o=s.isStopped,a=s.observers;return i||o?Ut:(this.currentObservers=null,a.push(n),new Ee(function(){r.currentObservers=null,qe(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,s=r.hasError,i=r.thrownError,o=r.isStopped;s?n.error(i):o&&n.complete()},e.prototype.asObservable=function(){var n=new B;return n.source=this,n},e.create=function(n,r){return new Bt(n,r)},e}(B),Bt=function(t){L(e,t);function e(n,r){var s=t.call(this)||this;return s.destination=n,s.source=r,s}return e.prototype.next=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.next)===null||s===void 0||s.call(r,n)},e.prototype.error=function(n){var r,s;(s=(r=this.destination)===null||r===void 0?void 0:r.error)===null||s===void 0||s.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,s;return(s=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&s!==void 0?s:Ut},e}(te),Vt={now:function(){return(Vt.delegate||Date).now()},delegate:void 0},nr=function(t){L(e,t);function e(n,r){return t.call(this)||this}return e.prototype.schedule=function(n,r){return this},e}(Ee),He={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=He.delegate;return s!=null&&s.setInterval?s.setInterval.apply(s,de([t,e],le(n))):setInterval.apply(void 0,de([t,e],le(n)))},clearInterval:function(t){var e=He.delegate;return((e==null?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},rr=function(t){L(e,t);function e(n,r){var s=t.call(this,n,r)||this;return s.scheduler=n,s.work=r,s.pending=!1,s}return e.prototype.schedule=function(n,r){var s;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,r)),this.pending=!0,this.delay=r,this.id=(s=this.id)!==null&&s!==void 0?s:this.requestAsyncId(o,this.id,r),this},e.prototype.requestAsyncId=function(n,r,s){return s===void 0&&(s=0),He.setInterval(n.flush.bind(n,this),s)},e.prototype.recycleAsyncId=function(n,r,s){if(s===void 0&&(s=0),s!=null&&this.delay===s&&this.pending===!1)return r;r!=null&&He.clearInterval(r)},e.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var s=this._execute(n,r);if(s)return s;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(n,r){var s=!1,i;try{this.work(n)}catch(o){s=!0,i=o||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),i},e.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,s=n.scheduler,i=s.actions;this.work=this.state=this.scheduler=null,this.pending=!1,qe(i,this),r!=null&&(this.id=this.recycleAsyncId(s,r,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(nr),Ft=function(){function t(e,n){n===void 0&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(e,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,e).schedule(r,n)},t.now=Vt.now,t}(),sr=function(t){L(e,t);function e(n,r){r===void 0&&(r=Ft.now);var s=t.call(this,n,r)||this;return s.actions=[],s._active=!1,s}return e.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var s;this._active=!0;do if(s=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,s){for(;n=r.shift();)n.unsubscribe();throw s}},e}(Ft),ir=new sr(rr),or=ir,zt=new B(function(t){return t.complete()});function Ht(t){return t&&$(t.schedule)}function Kt(t){return t[t.length-1]}function Yt(t){return Ht(Kt(t))?t.pop():void 0}function ar(t,e){return typeof Kt(t)=="number"?t.pop():e}var Gt=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function Jt(t){return $(t==null?void 0:t.then)}function Xt(t){return $(t[ut])}function Qt(t){return Symbol.asyncIterator&&$(t==null?void 0:t[Symbol.asyncIterator])}function en(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function ur(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tn=ur();function nn(t){return $(t==null?void 0:t[tn])}function rn(t){return Vn(this,arguments,function(){var n,r,s,i;return Lt(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Se(n.read())];case 3:return r=o.sent(),s=r.value,i=r.done,i?[4,Se(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Se(s)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function sn(t){return $(t==null?void 0:t.getReader)}function ne(t){if(t instanceof B)return t;if(t!=null){if(Xt(t))return cr(t);if(Gt(t))return lr(t);if(Jt(t))return dr(t);if(Qt(t))return on(t);if(nn(t))return fr(t);if(sn(t))return hr(t)}throw en(t)}function cr(t){return new B(function(e){var n=t[ut]();if($(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function lr(t){return new B(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function dr(t){return new B(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,Wt)})}function fr(t){return new B(function(e){var n,r;try{for(var s=Te(t),i=s.next();!i.done;i=s.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e.complete()})}function on(t){return new B(function(e){pr(t,e).catch(function(n){return e.error(n)})})}function hr(t){return on(rn(t))}function pr(t,e){var n,r,s,i;return Bn(this,void 0,void 0,function(){var o,a;return Lt(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=Fn(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),s={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function re(t,e,n,r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var i=e.schedule(function(){n(),s?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!s)return i}function an(t,e){return e===void 0&&(e=0),V(function(n,r){n.subscribe(F(r,function(s){return re(r,t,function(){return r.next(s)},e)},function(){return re(r,t,function(){return r.complete()},e)},function(s){return re(r,t,function(){return r.error(s)},e)}))})}function un(t,e){return e===void 0&&(e=0),V(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function mr(t,e){return ne(t).pipe(un(e),an(e))}function yr(t,e){return ne(t).pipe(un(e),an(e))}function vr(t,e){return new B(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function gr(t,e){return new B(function(n){var r;return re(n,e,function(){r=t[tn](),re(n,e,function(){var s,i,o;try{s=r.next(),i=s.value,o=s.done}catch(a){n.error(a);return}o?n.complete():n.next(i)},0,!0)}),function(){return $(r==null?void 0:r.return)&&r.return()}})}function cn(t,e){if(!t)throw new Error("Iterable cannot be null");return new B(function(n){re(n,e,function(){var r=t[Symbol.asyncIterator]();re(n,e,function(){r.next().then(function(s){s.done?n.complete():n.next(s.value)})},0,!0)})})}function _r(t,e){return cn(rn(t),e)}function br(t,e){if(t!=null){if(Xt(t))return mr(t,e);if(Gt(t))return vr(t,e);if(Jt(t))return yr(t,e);if(Qt(t))return cn(t,e);if(nn(t))return gr(t,e);if(sn(t))return _r(t,e)}throw en(t)}function ln(t,e){return e?br(t,e):ne(t)}function wr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Yt(t);return ln(t,n)}var ct=tt(function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}});function Tr(t,e){var n=typeof e=="object";return new Promise(function(r,s){var i=new Oe({next:function(o){r(o),i.unsubscribe()},error:s,complete:function(){n?r(e.defaultValue):s(new ct)}});t.subscribe(i)})}function Sr(t){return t instanceof Date&&!isNaN(t)}function je(t,e){return V(function(n,r){var s=0;n.subscribe(F(r,function(i){r.next(t.call(e,i,s++))}))})}function Er(t,e,n,r,s,i,o,a){var c=[],u=0,l=0,w=!1,y=function(){w&&!c.length&&!u&&e.complete()},T=function(m){return u<r?j(m):c.push(m)},j=function(m){i&&e.next(m),u++;var k=!1;ne(n(m,l++)).subscribe(F(e,function(P){s==null||s(P),i?T(P):e.next(P)},function(){k=!0},void 0,function(){if(k)try{u--;for(var P=function(){var E=c.shift();o?re(e,o,function(){return j(E)}):j(E)};c.length&&u<r;)P();y()}catch(E){e.error(E)}}))};return t.subscribe(F(e,T,function(){w=!0,y()})),function(){a==null||a()}}function dn(t,e,n){return n===void 0&&(n=1/0),$(e)?dn(function(r,s){return je(function(i,o){return e(r,i,s,o)})(ne(t(r,s)))},n):(typeof e=="number"&&(n=e),V(function(r,s){return Er(r,s,t,n)}))}function Or(t){return t===void 0&&(t=1/0),dn(ze,t)}function xr(t,e,n){t===void 0&&(t=0),n===void 0&&(n=or);var r=-1;return e!=null&&(Ht(e)?n=e:r=e),new B(function(s){var i=Sr(t)?+t-n.now():t;i<0&&(i=0);var o=0;return n.schedule(function(){s.closed||(s.next(o++),0<=r?this.schedule(void 0,r):s.complete())},i)})}function lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Yt(t),r=ar(t,1/0),s=t;return s.length?s.length===1?ne(s[0]):Or(r)(ln(s,n)):zt}function Me(t,e){return V(function(n,r){var s=0;n.subscribe(F(r,function(i){return t.call(e,i,s++)&&r.next(i)}))})}function Ar(t){return V(function(e,n){var r=!1;e.subscribe(F(n,function(s){r=!0,n.next(s)},function(){r||n.next(t),n.complete()}))})}function kr(t){return t<=0?function(){return zt}:V(function(e,n){var r=0;e.subscribe(F(n,function(s){++r<=t&&(n.next(s),t<=r&&n.complete())}))})}function Pr(t){return t===void 0&&(t=Rr),V(function(e,n){var r=!1;e.subscribe(F(n,function(s){r=!0,n.next(s)},function(){return r?n.complete():n.error(t())}))})}function Rr(){return new ct}function fn(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Me(function(s,i){return t(s,i,r)}):ze,kr(1),n?Ar(e):Pr(function(){return new ct}))}}function hn(t){t===void 0&&(t={});var e=t.connector,n=e===void 0?function(){return new te}:e,r=t.resetOnError,s=r===void 0?!0:r,i=t.resetOnComplete,o=i===void 0?!0:i,a=t.resetOnRefCountZero,c=a===void 0?!0:a;return function(u){var l,w,y,T=0,j=!1,m=!1,k=function(){w==null||w.unsubscribe(),w=void 0},P=function(){k(),l=y=void 0,j=m=!1},E=function(){var ce=l;P(),ce==null||ce.unsubscribe()};return V(function(ce,q){T++,!m&&!j&&k();var $e=y=y??n();q.add(function(){T--,T===0&&!m&&!j&&(w=dt(E,c))}),$e.subscribe(q),!l&&T>0&&(l=new Oe({next:function(be){return $e.next(be)},error:function(be){m=!0,k(),w=dt(P,s,be),$e.error(be)},complete:function(){j=!0,k(),w=dt(P,o),$e.complete()}}),ne(ce).subscribe(l))})(u)}}function dt(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(e===!0){t();return}if(e!==!1){var s=new Oe({next:function(){s.unsubscribe(),t()}});return e.apply(void 0,de([],le(n))).subscribe(s)}}function Ir(t){return V(function(e,n){ne(t).subscribe(F(n,function(){return n.complete()},it)),!n.closed&&e.subscribe(n)})}function xe(t,e,n){var r=$(t)||e||n?{next:t,error:e,complete:n}:t;return r?V(function(s,i){var o;(o=r.subscribe)===null||o===void 0||o.call(r);var a=!0;s.subscribe(F(i,function(c){var u;(u=r.next)===null||u===void 0||u.call(r,c),i.next(c)},function(){var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},function(c){var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),i.error(c)},function(){var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ze}const Cr=()=>({outgoingMessageSubject:new te,incomingMessageSubject:new te,responseSubject:new te,messageLifeCycleEventSubject:new te,dispatchEventSubject:new te}),ft={outgoingMessage:"radix#chromeExtension#send",incomingMessage:"radix#chromeExtension#receive"},$r=t=>t.outgoingMessageSubject.pipe(je(e=>({event:ft.outgoingMessage,payload:e})),xe(e=>{t.dispatchEventSubject.next(e)}),hn());var Le=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pn={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(Le,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"];function i(m,k){var P=m[k];if(typeof P.bind=="function")return P.bind(m);try{return Function.prototype.bind.call(P,m)}catch{return function(){return Function.prototype.apply.apply(P,[m,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?o:console[m]!==void 0?i(console,m):console.log!==void 0?i(console,"log"):e}function c(m,k){for(var P=0;P<s.length;P++){var E=s[P];this[E]=P<m?e:this.methodFactory(E,m,k)}this.log=this.debug}function u(m,k,P){return function(){typeof console!==n&&(c.call(this,k,P),this[m].apply(this,arguments))}}function l(m,k,P){return a(m)||u.apply(this,arguments)}function w(m,k,P){var E=this,ce;k=k??"WARN";var q="loglevel";typeof m=="string"?q+=":"+m:typeof m=="symbol"&&(q=void 0);function $e(A){var we=(s[A]||"silent").toUpperCase();if(!(typeof window===n||!q)){try{window.localStorage[q]=we;return}catch{}try{window.document.cookie=encodeURIComponent(q)+"="+we+";"}catch{}}}function be(){var A;if(!(typeof window===n||!q)){try{A=window.localStorage[q]}catch{}if(typeof A===n)try{var we=window.document.cookie,et=we.indexOf(encodeURIComponent(q)+"=");et!==-1&&(A=/^([^;]+)/.exec(we.slice(et))[1])}catch{}return E.levels[A]===void 0&&(A=void 0),A}}function Ri(){if(!(typeof window===n||!q)){try{window.localStorage.removeItem(q);return}catch{}try{window.document.cookie=encodeURIComponent(q)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}E.name=m,E.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},E.methodFactory=P||l,E.getLevel=function(){return ce},E.setLevel=function(A,we){if(typeof A=="string"&&E.levels[A.toUpperCase()]!==void 0&&(A=E.levels[A.toUpperCase()]),typeof A=="number"&&A>=0&&A<=E.levels.SILENT){if(ce=A,we!==!1&&$e(A),c.call(E,A,m),typeof console===n&&A<E.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+A},E.setDefaultLevel=function(A){k=A,be()||E.setLevel(A,!1)},E.resetLevel=function(){E.setLevel(k,!1),Ri()},E.enableAll=function(A){E.setLevel(E.levels.TRACE,A)},E.disableAll=function(A){E.setLevel(E.levels.SILENT,A)};var Mt=be();Mt==null&&(Mt=k),E.setLevel(Mt,!1)}var y=new w,T={};y.getLogger=function(k){if(typeof k!="symbol"&&typeof k!="string"||k==="")throw new TypeError("You must supply a name when creating a logger.");var P=T[k];return P||(P=T[k]=new w(k,y.getLevel(),y.methodFactory)),P};var j=typeof window!==n?window.log:void 0;return y.noConflict=function(){return typeof window!==n&&window.log===y&&(window.log=j),y},y.getLoggers=function(){return T},y.default=y,y})})(pn);const G=pn.exports,Nr=t=>t.incomingMessageSubject.pipe(xe(e=>{"eventType"in e?(G.debug(`ðŸ”µðŸ’¬â¬‡ï¸ message lifecycle event
${JSON.stringify(e,null,2)}`),t.messageLifeCycleEventSubject.next(e)):(G.debug(`ðŸ”µâ¬‡ï¸ wallet response
${JSON.stringify(e,null,2)}`),t.responseSubject.next(e))})),jr=t=>t.dispatchEventSubject.pipe(xe(({event:e,payload:n})=>{G.debug(`ðŸ”µâ¬†ï¸ wallet request
${JSON.stringify(n,null,2)}`),window.dispatchEvent(new CustomEvent(e,{detail:n}))})),Mr=t=>{const e=new Ee;return e.add(jr(t).subscribe()),e.add($r(t).subscribe()),e.add(Nr(t).subscribe()),e},Lr=t=>{const e=r=>{const s=r.detail;t.incomingMessageSubject.next(s)};return addEventListener(ft.incomingMessage,e),{destroy:()=>{removeEventListener(ft.incomingMessage,e)}}},Ur=(t=Cr())=>{const e=Mr(t),n=Lr(t);return{destroy:()=>{n.destroy(),e.unsubscribe()},subjects:t}};function ht(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(l){try{u(r.next(l))}catch(w){o(w)}}function c(l){try{u(r.throw(l))}catch(w){o(w)}}function u(l){l.done?i(l.value):s(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function pt(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(l){u=[6,l],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ke(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function fe(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Zr={withStackTrace:!1},mn=function(t,e,n){n===void 0&&(n=Zr);var r=e.isOk()?{type:"Ok",value:e.value}:{type:"Err",value:e.error},s=n.withStackTrace?new Error().stack:void 0;return{data:r,message:t,stack:s}},J=function(){function t(e){this._promise=e}return t.fromSafePromise=function(e){var n=e.then(function(r){return new he(r)});return new t(n)},t.fromPromise=function(e,n){var r=e.then(function(s){return new he(s)}).catch(function(s){return new pe(n(s))});return new t(r)},t.combine=function(e){return Wr(e)},t.combineWithAllErrors=function(e){return qr(e)},t.prototype.map=function(e){var n=this;return new t(this._promise.then(function(r){return ht(n,void 0,void 0,function(){var s;return pt(this,function(i){switch(i.label){case 0:return r.isErr()?[2,new pe(r.error)]:(s=he.bind,[4,e(r.value)]);case 1:return[2,new(s.apply(he,[void 0,i.sent()]))]}})})}))},t.prototype.mapErr=function(e){var n=this;return new t(this._promise.then(function(r){return ht(n,void 0,void 0,function(){var s;return pt(this,function(i){switch(i.label){case 0:return r.isOk()?[2,new he(r.value)]:(s=pe.bind,[4,e(r.error)]);case 1:return[2,new(s.apply(pe,[void 0,i.sent()]))]}})})}))},t.prototype.andThen=function(e){return new t(this._promise.then(function(n){if(n.isErr())return new pe(n.error);var r=e(n.value);return r instanceof t?r._promise:r}))},t.prototype.orElse=function(e){var n=this;return new t(this._promise.then(function(r){return ht(n,void 0,void 0,function(){return pt(this,function(s){return r.isErr()?[2,e(r.error)]:[2,new he(r.value)]})})}))},t.prototype.match=function(e,n){return this._promise.then(function(r){return r.match(e,n)})},t.prototype.unwrapOr=function(e){return this._promise.then(function(n){return n.unwrapOr(e)})},t.prototype.then=function(e,n){return this._promise.then(e,n)},t}(),yn=function(t){return new J(Promise.resolve(new pe(t)))};J.fromPromise,J.fromSafePromise;var Dr=function(t){return function(e){return fe(fe([],Ke(e),!1),[t],!1)}},vn=function(t){return t.reduce(function(e,n){return e.isOk()?n.isErr()?H(n.error):e.map(Dr(n.value)):e},z([]))},Wr=function(t){return J.fromSafePromise(Promise.all(t)).andThen(vn)},gn=function(t){return t.reduce(function(e,n){return n.isErr()?e.isErr()?H(fe(fe([],Ke(e.error),!1),[n.error],!1)):H([n.error]):e.isErr()?e:z(fe(fe([],Ke(e.value),!1),[n.value],!1))},z([]))},qr=function(t){return J.fromSafePromise(Promise.all(t)).andThen(gn)},mt;(function(t){function e(s,i){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];try{var c=s.apply(void 0,fe([],Ke(o),!1));return z(c)}catch(u){return H(i?i(u):u)}}}t.fromThrowable=e;function n(s){return vn(s)}t.combine=n;function r(s){return gn(s)}t.combineWithAllErrors=r})(mt||(mt={}));var z=function(t){return new he(t)},H=function(t){return new pe(t)},he=function(){function t(e){this.value=e}return t.prototype.isOk=function(){return!0},t.prototype.isErr=function(){return!this.isOk()},t.prototype.map=function(e){return z(e(this.value))},t.prototype.mapErr=function(e){return z(this.value)},t.prototype.andThen=function(e){return e(this.value)},t.prototype.orElse=function(e){return z(this.value)},t.prototype.asyncAndThen=function(e){return e(this.value)},t.prototype.asyncMap=function(e){return J.fromSafePromise(e(this.value))},t.prototype.unwrapOr=function(e){return this.value},t.prototype.match=function(e,n){return e(this.value)},t.prototype._unsafeUnwrap=function(e){return this.value},t.prototype._unsafeUnwrapErr=function(e){throw mn("Called `_unsafeUnwrapErr` on an Ok",this,e)},t}(),pe=function(){function t(e){this.error=e}return t.prototype.isOk=function(){return!1},t.prototype.isErr=function(){return!this.isOk()},t.prototype.map=function(e){return H(this.error)},t.prototype.mapErr=function(e){return H(e(this.error))},t.prototype.andThen=function(e){return H(this.error)},t.prototype.orElse=function(e){return e(this.error)},t.prototype.asyncAndThen=function(e){return yn(this.error)},t.prototype.asyncMap=function(e){return yn(this.error)},t.prototype.unwrapOr=function(e){return e},t.prototype.match=function(e,n){return n(this.error)},t.prototype._unsafeUnwrap=function(e){throw mn("Called `_unsafeUnwrap` on an Err",this,e)},t.prototype._unsafeUnwrapErr=function(e){return this.error},t}();mt.fromThrowable;const _n={extensionDetectionTime:100,logLevel:"info"},Br=t=>t,me={rejectedByUser:"rejectedByUser",missingExtension:"missingExtension",canceledByUser:"canceledByUser",walletRequestValidation:"walletRequestValidation",walletResponseValidation:"walletResponseValidation",wrongNetwork:"wrongNetwork",failedToPrepareTransaction:"failedToPrepareTransaction",failedToCompileTransaction:"failedToCompileTransaction",failedToSignTransaction:"failedToSignTransaction",failedToSubmitTransaction:"failedToSubmitTransaction",failedToPollSubmittedTransaction:"failedToPollSubmittedTransaction",submittedTransactionWasDuplicate:"submittedTransactionWasDuplicate",submittedTransactionHasFailedTransactionStatus:"submittedTransactionHasFailedTransactionStatus",submittedTransactionHasRejectedTransactionStatus:"submittedTransactionHasRejectedTransactionStatus"},Vr=new Map().set(me.missingExtension,"extension could not be found").set(me.rejectedByUser,"user rejected request").set(me.canceledByUser,"user has canceled the request"),Ye=(t,e,n)=>({error:t,requestId:e,message:n||Vr.get(t)||""}),Fr=t=>J.fromPromise(Tr(t),Br).andThen(e=>e),zr=(t,e)=>t.messageLifeCycleEventSubject.pipe(Me(n=>n.requestId===e)),Hr=t=>e=>n=>{const r=new te;e.requestControl&&e.requestControl({cancelRequest:()=>(G.debug(`ðŸ”µâ¬†ï¸âŒ wallet request canceled
${JSON.stringify(n,null,2)}`),r.next())});const s=r.asObservable().pipe(je(()=>H(Ye(me.canceledByUser,n.requestId)))),i=t.responseSubject.pipe(Me(T=>T.requestId===n.requestId),je(T=>"items"in T?z(T):H(T))),o=lt(i,s).pipe(fn()),a=zr(t,n.requestId).pipe(xe(T=>{e.eventCallback&&e.eventCallback(T.eventType)}),Ir(i),hn()),c=a.subscribe(),u=xr(_n.extensionDetectionTime).pipe(je(()=>H(Ye(me.missingExtension,n.requestId)))),l=lt(u,a).pipe(fn(),Me(T=>!("eventType"in T))),w=wr(!0).pipe(xe(()=>{t.outgoingMessageSubject.next(n)}),Me(()=>!1)),y=lt(o,l,w).pipe(xe(()=>{c.unsubscribe()}));return Fr(y)};var x;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=r,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(x||(x={}));const f=x.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ye=t=>{switch(typeof t){case"undefined":return f.undefined;case"string":return f.string;case"number":return isNaN(t)?f.nan:f.number;case"boolean":return f.boolean;case"function":return f.function;case"bigint":return f.bigint;case"object":return Array.isArray(t)?f.array:t===null?f.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?f.promise:typeof Map<"u"&&t instanceof Map?f.map:typeof Set<"u"&&t instanceof Set?f.set:typeof Date<"u"&&t instanceof Date?f.date:f.object;default:return f.unknown}},d=x.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of"]);class se extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(i){return i.message},r={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(a[u]=a[u]||{_errors:[]},a[u]._errors.push(n(o))):a[u]=a[u]||{_errors:[]},a=a[u],c++}}};return s(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,x.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}se.create=t=>new se(t);const Ge=(t,e)=>{let n;switch(t.code){case d.invalid_type:t.received===f.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case d.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,x.jsonStringifyReplacer)}`;break;case d.unrecognized_keys:n=`Unrecognized key(s) in object: ${x.joinValues(t.keys,", ")}`;break;case d.invalid_union:n="Invalid input";break;case d.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${x.joinValues(t.options)}`;break;case d.invalid_enum_value:n=`Invalid enum value. Expected ${x.joinValues(t.options)}, received '${t.received}'`;break;case d.invalid_arguments:n="Invalid function arguments";break;case d.invalid_return_type:n="Invalid function return type";break;case d.invalid_date:n="Invalid date";break;case d.invalid_string:typeof t.validation=="object"?"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:x.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case d.too_small:t.type==="array"?n=`Array must contain ${t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be greater than ${t.inclusive?"or equal to ":""}${t.minimum}`:t.type==="date"?n=`Date must be greater than ${t.inclusive?"or equal to ":""}${new Date(t.minimum)}`:n="Invalid input";break;case d.too_big:t.type==="array"?n=`Array must contain ${t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be less than ${t.inclusive?"or equal to ":""}${t.maximum}`:t.type==="date"?n=`Date must be smaller than ${t.inclusive?"or equal to ":""}${new Date(t.maximum)}`:n="Invalid input";break;case d.custom:n="Invalid input";break;case d.invalid_intersection_types:n="Intersection results could not be merged";break;case d.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;default:n=e.defaultError,x.assertNever(t)}return{message:n}};let Kr=Ge;function yt(){return Kr}const vt=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,i=[...n,...s.path||[]],o={...s,path:i};let a="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)a=u(o,{data:e,defaultError:a}).message;return{...s,path:i,message:s.message||a}};function h(t,e){const n=vt({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,yt(),Ge].filter(r=>!!r)});t.common.issues.push(n)}class U{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return g;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return U.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return g;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),(typeof o.value<"u"||s.alwaysSet)&&(r[i.value]=o.value)}return{status:e.value,value:r}}}const g=Object.freeze({status:"aborted"}),Z=t=>({status:"valid",value:t}),bn=t=>t.status==="aborted",wn=t=>t.status==="dirty",gt=t=>t.status==="valid",Tn=t=>typeof Promise!==void 0&&t instanceof Promise;var O;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(O||(O={}));class K{constructor(e,n,r,s){this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._path.concat(this._key)}}const Sn=(t,e)=>{if(gt(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,error:new se(t.common.issues)}};function b(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:s}}class S{constructor(e){this.spa=this.safeParseAsync,this.superRefine=this._refinement,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.default=this.default.bind(this),this.describe=this.describe.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return ye(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new U,ctx:{common:e.parent.common,data:e.data,parsedType:ye(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Tn(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ye(e)},i=this._parseSync({data:e,path:s.path,parent:s});return Sn(s,i)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ye(e)},s=this._parse({data:e,path:[],parent:r}),i=await(Tn(s)?s:Promise.resolve(s));return Sn(r,i)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:d.custom,...r(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new oe({schema:this,typeName:v.ZodEffects,effect:{type:"refinement",refinement:e}})}optional(){return ee.create(this)}nullable(){return Ie.create(this)}nullish(){return this.optional().nullable()}array(){return X.create(this)}promise(){return De.create(this)}or(e){return Je.create([this,e])}and(e){return Xe.create(this,e)}transform(e){return new oe({schema:this,typeName:v.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new xn({innerType:this,defaultValue:n,typeName:v.ZodDefault})}brand(){return new Qr({typeName:v.ZodBranded,type:this,...b(void 0)})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Yr=/^c[^\s-]{8,}$/i,Gr=/^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i,Jr=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;class ve extends S{constructor(){super(...arguments),this._regex=(e,n,r)=>this.refinement(s=>e.test(s),{validation:n,code:d.invalid_string,...O.errToObj(r)}),this.nonempty=e=>this.min(1,O.errToObj(e)),this.trim=()=>new ve({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}_parse(e){if(this._getType(e)!==f.string){const i=this._getOrReturnCtx(e);return h(i,{code:d.invalid_type,expected:f.string,received:i.parsedType}),g}const r=new U;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:d.too_small,minimum:i.value,type:"string",inclusive:!0,message:i.message}),r.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:d.too_big,maximum:i.value,type:"string",inclusive:!0,message:i.message}),r.dirty());else if(i.kind==="email")Jr.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"email",code:d.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")Gr.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"uuid",code:d.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")Yr.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"cuid",code:d.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),h(s,{validation:"url",code:d.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),h(s,{validation:"regex",code:d.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),h(s,{code:d.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),h(s,{code:d.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):x.assertNever(i);return{status:r.value,value:e.data}}_addCheck(e){return new ve({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...O.errToObj(e)})}url(e){return this._addCheck({kind:"url",...O.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...O.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...O.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...O.errToObj(n)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...O.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...O.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...O.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...O.errToObj(n)})}length(e,n){return this.min(e,n).max(e,n)}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ve.create=t=>new ve({checks:[],typeName:v.ZodString,...b(t)});function Xr(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,i=parseInt(t.toFixed(s).replace(".","")),o=parseInt(e.toFixed(s).replace(".",""));return i%o/Math.pow(10,s)}class Ae extends S{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._getType(e)!==f.number){const i=this._getOrReturnCtx(e);return h(i,{code:d.invalid_type,expected:f.number,received:i.parsedType}),g}let r;const s=new U;for(const i of this._def.checks)i.kind==="int"?x.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),h(r,{code:d.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?Xr(e.data,i.value)!==0&&(r=this._getOrReturnCtx(e,r),h(r,{code:d.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):x.assertNever(i);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,O.toString(n))}gt(e,n){return this.setLimit("min",e,!1,O.toString(n))}lte(e,n){return this.setLimit("max",e,!0,O.toString(n))}lt(e,n){return this.setLimit("max",e,!1,O.toString(n))}setLimit(e,n,r,s){return new Ae({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:O.toString(s)}]})}_addCheck(e){return new Ae({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:O.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:O.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:O.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:O.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:O.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:O.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int")}}Ae.create=t=>new Ae({checks:[],typeName:v.ZodNumber,...b(t)});class _t extends S{_parse(e){if(this._getType(e)!==f.bigint){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.bigint,received:r.parsedType}),g}return Z(e.data)}}_t.create=t=>new _t({typeName:v.ZodBigInt,...b(t)});class bt extends S{_parse(e){if(this._getType(e)!==f.boolean){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.boolean,received:r.parsedType}),g}return Z(e.data)}}bt.create=t=>new bt({typeName:v.ZodBoolean,...b(t)});class Ue extends S{_parse(e){if(this._getType(e)!==f.date){const i=this._getOrReturnCtx(e);return h(i,{code:d.invalid_type,expected:f.date,received:i.parsedType}),g}if(isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return h(i,{code:d.invalid_date}),g}const r=new U;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:d.too_small,message:i.message,inclusive:!0,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),h(s,{code:d.too_big,message:i.message,inclusive:!0,maximum:i.value,type:"date"}),r.dirty()):x.assertNever(i);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ue({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:O.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:O.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Ue.create=t=>new Ue({checks:[],typeName:v.ZodDate,...b(t)});class wt extends S{_parse(e){if(this._getType(e)!==f.undefined){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.undefined,received:r.parsedType}),g}return Z(e.data)}}wt.create=t=>new wt({typeName:v.ZodUndefined,...b(t)});class Tt extends S{_parse(e){if(this._getType(e)!==f.null){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.null,received:r.parsedType}),g}return Z(e.data)}}Tt.create=t=>new Tt({typeName:v.ZodNull,...b(t)});class St extends S{constructor(){super(...arguments),this._any=!0}_parse(e){return Z(e.data)}}St.create=t=>new St({typeName:v.ZodAny,...b(t)});class ke extends S{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Z(e.data)}}ke.create=t=>new ke({typeName:v.ZodUnknown,...b(t)});class ie extends S{_parse(e){const n=this._getOrReturnCtx(e);return h(n,{code:d.invalid_type,expected:f.never,received:n.parsedType}),g}}ie.create=t=>new ie({typeName:v.ZodNever,...b(t)});class Et extends S{_parse(e){if(this._getType(e)!==f.undefined){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.void,received:r.parsedType}),g}return Z(e.data)}}Et.create=t=>new Et({typeName:v.ZodVoid,...b(t)});class X extends S{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==f.array)return h(n,{code:d.invalid_type,expected:f.array,received:n.parsedType}),g;if(s.minLength!==null&&n.data.length<s.minLength.value&&(h(n,{code:d.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(h(n,{code:d.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all(n.data.map((o,a)=>s.type._parseAsync(new K(n,o,n.path,a)))).then(o=>U.mergeArray(r,o));const i=n.data.map((o,a)=>s.type._parseSync(new K(n,o,n.path,a)));return U.mergeArray(r,i)}get element(){return this._def.type}min(e,n){return new X({...this._def,minLength:{value:e,message:O.toString(n)}})}max(e,n){return new X({...this._def,maxLength:{value:e,message:O.toString(n)}})}length(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}X.create=(t,e)=>new X({type:t,minLength:null,maxLength:null,typeName:v.ZodArray,...b(e)});var Ot;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Ot||(Ot={}));const En=t=>e=>new C({...t,shape:()=>({...t.shape(),...e})});function Pe(t){if(t instanceof C){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ee.create(Pe(r))}return new C({...t._def,shape:()=>e})}else return t instanceof X?X.create(Pe(t.element)):t instanceof ee?ee.create(Pe(t.unwrap())):t instanceof Ie?Ie.create(Pe(t.unwrap())):t instanceof Q?Q.create(t.items.map(e=>Pe(e))):t}class C extends S{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=En(this._def),this.extend=En(this._def)}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=x.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==f.object){const u=this._getOrReturnCtx(e);return h(u,{code:d.invalid_type,expected:f.object,received:u.parsedType}),g}const{status:r,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ie&&this._def.unknownKeys==="strip"))for(const u in s.data)o.includes(u)||a.push(u);const c=[];for(const u of o){const l=i[u],w=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new K(s,w,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof ie){const u=this._def.unknownKeys;if(u==="passthrough")for(const l of a)c.push({key:{status:"valid",value:l},value:{status:"valid",value:s.data[l]}});else if(u==="strict")a.length>0&&(h(s,{code:d.unrecognized_keys,keys:a}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const l of a){const w=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new K(s,w,s.path,l)),alwaysSet:l in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const l of c){const w=await l.key;u.push({key:w,value:await l.value,alwaysSet:l.alwaysSet})}return u}).then(u=>U.mergeObjectSync(r,u)):U.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return O.errToObj,new C({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,i,o,a;const c=(o=(i=(s=this._def).errorMap)===null||i===void 0?void 0:i.call(s,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=O.errToObj(e).message)!==null&&a!==void 0?a:c}:{message:c}}}:{}})}strip(){return new C({...this._def,unknownKeys:"strip"})}passthrough(){return new C({...this._def,unknownKeys:"passthrough"})}setKey(e,n){return this.augment({[e]:n})}merge(e){return new C({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>Ot.mergeShapes(this._def.shape(),e._def.shape()),typeName:v.ZodObject})}catchall(e){return new C({...this._def,catchall:e})}pick(e){const n={};return x.objectKeys(e).map(r=>{this.shape[r]&&(n[r]=this.shape[r])}),new C({...this._def,shape:()=>n})}omit(e){const n={};return x.objectKeys(this.shape).map(r=>{x.objectKeys(e).indexOf(r)===-1&&(n[r]=this.shape[r])}),new C({...this._def,shape:()=>n})}deepPartial(){return Pe(this)}partial(e){const n={};if(e)return x.objectKeys(this.shape).map(r=>{x.objectKeys(e).indexOf(r)===-1?n[r]=this.shape[r]:n[r]=this.shape[r].optional()}),new C({...this._def,shape:()=>n});for(const r in this.shape){const s=this.shape[r];n[r]=s.optional()}return new C({...this._def,shape:()=>n})}required(){const e={};for(const n in this.shape){let s=this.shape[n];for(;s instanceof ee;)s=s._def.innerType;e[n]=s}return new C({...this._def,shape:()=>e})}keyof(){return On(x.objectKeys(this.shape))}}C.create=(t,e)=>new C({shape:()=>t,unknownKeys:"strip",catchall:ie.create(),typeName:v.ZodObject,...b(e)}),C.strictCreate=(t,e)=>new C({shape:()=>t,unknownKeys:"strict",catchall:ie.create(),typeName:v.ZodObject,...b(e)}),C.lazycreate=(t,e)=>new C({shape:t,unknownKeys:"strip",catchall:ie.create(),typeName:v.ZodObject,...b(e)});class Je extends S{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new se(a.ctx.common.issues));return h(n,{code:d.invalid_union,unionErrors:o}),g}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},l=c._parseSync({data:n.data,path:n.path,parent:u});if(l.status==="valid")return l;l.status==="dirty"&&!i&&(i={result:l,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new se(c));return h(n,{code:d.invalid_union,unionErrors:a}),g}}get options(){return this._def.options}}Je.create=(t,e)=>new Je({options:t,typeName:v.ZodUnion,...b(e)});class xt extends S{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==f.object)return h(n,{code:d.invalid_type,expected:f.object,received:n.parsedType}),g;const r=this.discriminator,s=n.data[r],i=this.options.get(s);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(h(n,{code:d.invalid_union_discriminator,options:this.validDiscriminatorValues,path:[r]}),g)}get discriminator(){return this._def.discriminator}get validDiscriminatorValues(){return Array.from(this.options.keys())}get options(){return this._def.options}static create(e,n,r){const s=new Map;try{n.forEach(i=>{const o=i.shape[e].value;s.set(o,i)})}catch{throw new Error("The discriminator value could not be extracted from all the provided schemas")}if(s.size!==n.length)throw new Error("Some of the discriminator values are not unique");return new xt({typeName:v.ZodDiscriminatedUnion,discriminator:e,options:s,...b(r)})}}function At(t,e){const n=ye(t),r=ye(e);if(t===e)return{valid:!0,data:t};if(n===f.object&&r===f.object){const s=x.objectKeys(e),i=x.objectKeys(t).filter(a=>s.indexOf(a)!==-1),o={...t,...e};for(const a of i){const c=At(t[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(n===f.array&&r===f.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],a=e[i],c=At(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===f.date&&r===f.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Xe extends S{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(i,o)=>{if(bn(i)||bn(o))return g;const a=At(i.value,o.value);return a.valid?((wn(i)||wn(o))&&n.dirty(),{status:n.value,value:a.data}):(h(r,{code:d.invalid_intersection_types}),g)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Xe.create=(t,e,n)=>new Xe({left:t,right:e,typeName:v.ZodIntersection,...b(n)});class Q extends S{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.array)return h(r,{code:d.invalid_type,expected:f.array,received:r.parsedType}),g;if(r.data.length<this._def.items.length)return h(r,{code:d.too_small,minimum:this._def.items.length,inclusive:!0,type:"array"}),g;!this._def.rest&&r.data.length>this._def.items.length&&(h(r,{code:d.too_big,maximum:this._def.items.length,inclusive:!0,type:"array"}),n.dirty());const i=r.data.map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new K(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>U.mergeArray(n,o)):U.mergeArray(n,i)}get items(){return this._def.items}rest(e){return new Q({...this._def,rest:e})}}Q.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Q({items:t,typeName:v.ZodTuple,rest:null,...b(e)})};class Qe extends S{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.object)return h(r,{code:d.invalid_type,expected:f.object,received:r.parsedType}),g;const s=[],i=this._def.keyType,o=this._def.valueType;for(const a in r.data)s.push({key:i._parse(new K(r,a,r.path,a)),value:o._parse(new K(r,r.data[a],r.path,a))});return r.common.async?U.mergeObjectAsync(n,s):U.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof S?new Qe({keyType:e,valueType:n,typeName:v.ZodRecord,...b(r)}):new Qe({keyType:ve.create(),valueType:e,typeName:v.ZodRecord,...b(n)})}}class kt extends S{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.map)return h(r,{code:d.invalid_type,expected:f.map,received:r.parsedType}),g;const s=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([a,c],u)=>({key:s._parse(new K(r,a,r.path,[u,"key"])),value:i._parse(new K(r,c,r.path,[u,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,l=await c.value;if(u.status==="aborted"||l.status==="aborted")return g;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const c of o){const u=c.key,l=c.value;if(u.status==="aborted"||l.status==="aborted")return g;(u.status==="dirty"||l.status==="dirty")&&n.dirty(),a.set(u.value,l.value)}return{status:n.value,value:a}}}}kt.create=(t,e,n)=>new kt({valueType:e,keyType:t,typeName:v.ZodMap,...b(n)});class Re extends S{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==f.set)return h(r,{code:d.invalid_type,expected:f.set,received:r.parsedType}),g;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(h(r,{code:d.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(h(r,{code:d.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,message:s.maxSize.message}),n.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const l of c){if(l.status==="aborted")return g;l.status==="dirty"&&n.dirty(),u.add(l.value)}return{status:n.value,value:u}}const a=[...r.data.values()].map((c,u)=>i._parse(new K(r,c,r.path,u)));return r.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,n){return new Re({...this._def,minSize:{value:e,message:O.toString(n)}})}max(e,n){return new Re({...this._def,maxSize:{value:e,message:O.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Re.create=(t,e)=>new Re({valueType:t,minSize:null,maxSize:null,typeName:v.ZodSet,...b(e)});class Ze extends S{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==f.function)return h(n,{code:d.invalid_type,expected:f.function,received:n.parsedType}),g;function r(a,c){return vt({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,yt(),Ge].filter(u=>!!u),issueData:{code:d.invalid_arguments,argumentsError:c}})}function s(a,c){return vt({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,yt(),Ge].filter(u=>!!u),issueData:{code:d.invalid_return_type,returnTypeError:c}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;return this._def.returns instanceof De?Z(async(...a)=>{const c=new se([]),u=await this._def.args.parseAsync(a,i).catch(y=>{throw c.addIssue(r(a,y)),c}),l=await o(...u);return await this._def.returns._def.type.parseAsync(l,i).catch(y=>{throw c.addIssue(s(l,y)),c})}):Z((...a)=>{const c=this._def.args.safeParse(a,i);if(!c.success)throw new se([r(a,c.error)]);const u=o(...c.data),l=this._def.returns.safeParse(u,i);if(!l.success)throw new se([s(u,l.error)]);return l.data})}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ze({...this._def,args:Q.create(e).rest(ke.create())})}returns(e){return new Ze({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new Ze({args:e||Q.create([]).rest(ke.create()),returns:n||ke.create(),typeName:v.ZodFunction,...b(r)})}}class Pt extends S{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Pt.create=(t,e)=>new Pt({getter:t,typeName:v.ZodLazy,...b(e)});class Rt extends S{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return h(n,{code:d.invalid_literal,expected:this._def.value}),g}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rt.create=(t,e)=>new Rt({value:t,typeName:v.ZodLiteral,...b(e)});function On(t,e){return new It({values:t,typeName:v.ZodEnum,...b(e)})}class It extends S{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return h(n,{expected:x.joinValues(r),received:n.parsedType,code:d.invalid_type}),g}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return h(n,{received:n.data,code:d.invalid_enum_value,options:r}),g}return Z(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}}It.create=On;class Ct extends S{_parse(e){const n=x.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==f.string&&r.parsedType!==f.number){const s=x.objectValues(n);return h(r,{expected:x.joinValues(s),received:r.parsedType,code:d.invalid_type}),g}if(n.indexOf(e.data)===-1){const s=x.objectValues(n);return h(r,{received:r.data,code:d.invalid_enum_value,options:s}),g}return Z(e.data)}get enum(){return this._def.values}}Ct.create=(t,e)=>new Ct({values:t,typeName:v.ZodNativeEnum,...b(e)});class De extends S{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==f.promise&&n.common.async===!1)return h(n,{code:d.invalid_type,expected:f.promise,received:n.parsedType}),g;const r=n.parsedType===f.promise?n.data:Promise.resolve(n.data);return Z(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}De.create=(t,e)=>new De({type:t,typeName:v.ZodPromise,...b(e)});class oe extends S{innerType(){return this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null;if(s.type==="preprocess"){const o=s.transform(r.data);return r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}const i={addIssue:o=>{h(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?g:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?g:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(s.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!gt(o))return o;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>gt(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:n.value,value:a})):o);x.assertNever(s)}}oe.create=(t,e,n)=>new oe({schema:t,typeName:v.ZodEffects,effect:e,...b(n)}),oe.createWithPreprocess=(t,e,n)=>new oe({schema:e,effect:{type:"preprocess",transform:t},typeName:v.ZodEffects,...b(n)});class ee extends S{_parse(e){return this._getType(e)===f.undefined?Z(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ee.create=(t,e)=>new ee({innerType:t,typeName:v.ZodOptional,...b(e)});class Ie extends S{_parse(e){return this._getType(e)===f.null?Z(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ie.create=(t,e)=>new Ie({innerType:t,typeName:v.ZodNullable,...b(e)});class xn extends S{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===f.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}xn.create=(t,e)=>new ee({innerType:t,typeName:v.ZodOptional,...b(e)});class $t extends S{_parse(e){if(this._getType(e)!==f.nan){const r=this._getOrReturnCtx(e);return h(r,{code:d.invalid_type,expected:f.nan,received:r.parsedType}),g}return{status:"valid",value:e.data}}}$t.create=t=>new $t({typeName:v.ZodNaN,...b(t)});class Qr extends S{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}C.lazycreate;var v;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded"})(v||(v={}));const R=ve.create,We=Ae.create;$t.create,_t.create;const An=bt.create;Ue.create,wt.create,Tt.create,St.create,ke.create,ie.create,Et.create,X.create;const I=C.create;C.strictCreate;const Ce=Je.create;xt.create,Xe.create,Q.create,Qe.create,kt.create,Re.create,Ze.create,Pt.create;const ae=Rt.create;It.create,Ct.create,De.create,oe.create,ee.create,Ie.create,oe.createWithPreprocess;const _={oneTimeAccountsRead:ae("oneTimeAccountsRead"),ongoingAccountsRead:ae("ongoingAccountsRead"),oneTimePersonaDataRead:ae("oneTimePersonaDataRead"),ongoingPersonaDataRead:ae("ongoingPersonaDataRead"),usePersonaRead:ae("usePersonaRead"),loginRead:ae("loginRead"),sendTransactionWrite:ae("sendTransactionWrite")},es=ae("rejectedByUser"),Nt=I({address:R(),label:R(),appearanceId:We()}),kn=I({account:Nt,challenge:R(),signature:R()}),Pn=I({field:R(),value:R()}),ts=I({networkId:We(),dAppId:R()}),ns=I({requestType:_.oneTimeAccountsRead,requiresProofOfOwnership:An(),numberOfAccounts:We().optional()}),rs=I({requestType:_.oneTimeAccountsRead,accounts:kn.array()}),ss=I({requestType:_.oneTimeAccountsRead,accounts:Nt.array()}),is=Ce([rs,ss]);I({requestType:_.ongoingAccountsRead,requiresProofOfOwnership:An(),numberOfAccounts:We().optional()});const os=I({requestType:_.ongoingAccountsRead,accounts:kn.array()}),as=I({requestType:_.ongoingAccountsRead,accounts:Nt.array()}),us=Ce([os,as]);I({requestType:_.oneTimePersonaDataRead,fields:R().array()});const cs=I({requestType:_.oneTimePersonaDataRead,fields:Pn.array()});I({requestType:_.ongoingPersonaDataRead,fields:R().array()});const ls=I({requestType:_.ongoingPersonaDataRead,fields:Pn.array()});I({requestType:_.usePersonaRead,id:R()});const ds=I({requestType:_.usePersonaRead,id:R()});I({requestType:_.loginRead,challenge:R().optional()});const fs=I({requestType:_.loginRead,personaId:R()}),hs=I({requestType:_.loginRead,personaId:R(),challenge:R(),publicKey:R(),signature:R(),identityComponentAddress:R()}),ps=Ce([fs,hs]),ms=I({requestType:_.sendTransactionWrite,transactionManifest:R(),version:We(),blobs:R().array().optional(),message:R().optional()}),ys=I({requestType:_.sendTransactionWrite,transactionIntentHash:R()}),vs=Ce([ns,ms]),gs=Ce([is,us,cs,ls,ds,ps,ys]),_s=I({requestId:R(),items:vs.array(),metadata:ts}),bs=I({requestId:R(),items:gs.array()}),ws=I({requestId:R(),error:es,message:R().optional()}),Ts=Ce([bs,ws]),Rn=t=>J.fromPromise(_s.parseAsync(t),e=>e.issues).map(()=>t).mapErr(()=>(G.error("ðŸ”µðŸ’¥ invalid wallet request"),Ye(me.walletRequestValidation,t.requestId))),In=t=>J.fromPromise(Ts.parseAsync(t),e=>e.issues).map(()=>t).mapErr(()=>(G.error("ðŸ”µðŸ’¥ invalid wallet response"),Ye(me.walletRequestValidation,t.requestId))),Cn=t=>t.reduce((e,n)=>{switch(n.requestType){case _.usePersonaRead.value:{const{requestType:r,...s}=n;return{...e,persona:s}}case _.loginRead.value:{const{requestType:r,...s}=n;return{...e,login:s}}case _.oneTimeAccountsRead.value:{const{requestType:r,...s}=n;return{...e,oneTimeAccounts:s.accounts}}case _.ongoingAccountsRead.value:{const{requestType:r,...s}=n;return{...e,ongoingAccounts:s.accounts}}case _.oneTimePersonaDataRead.value:{const{requestType:r,...s}=n;return{...e,oneTimePersonaData:s.fields}}case _.ongoingPersonaDataRead.value:{const{requestType:r,...s}=n;return{...e,ongoingPersonaData:s.fields}}case _.sendTransactionWrite.value:{const{requestType:r,...s}=n;return{...e,...s}}default:return e}},{}),D={oneTimeAccountsWithoutProofOfOwnership:"oneTimeAccountsWithoutProofOfOwnership",oneTimeAccountsWithProofOfOwnership:"oneTimeAccountsWithProofOfOwnership",ongoingAccountsWithoutProofOfOwnership:"ongoingAccountsWithoutProofOfOwnership",ongoingAccountsWithProofOfOwnership:"ongoingAccountsWithProofOfOwnership",usePersona:"usePersona",loginWithoutChallenge:"loginWithoutChallenge",loginWithChallenge:"loginWithChallenge",oneTimePersonaData:"oneTimePersonaData",ongoingPersonaData:"ongoingPersonaData"},Ss=new Map().set(D.oneTimeAccountsWithoutProofOfOwnership,_.oneTimeAccountsRead.value).set(D.oneTimeAccountsWithProofOfOwnership,_.oneTimeAccountsRead.value).set(D.ongoingAccountsWithProofOfOwnership,_.ongoingAccountsRead.value).set(D.ongoingAccountsWithoutProofOfOwnership,_.ongoingAccountsRead.value).set(D.loginWithChallenge,_.loginRead.value).set(D.loginWithoutChallenge,_.loginRead.value).set(D.usePersona,_.usePersonaRead.value).set(D.oneTimePersonaData,_.oneTimePersonaDataRead.value).set(D.ongoingPersonaData,_.ongoingPersonaDataRead.value).set("sendTransaction",_.sendTransactionWrite.value),$n=t=>z(Object.entries(t).reduce((e,[n,r])=>{switch(n){case D.oneTimeAccountsWithoutProofOfOwnership:return[...e,{requestType:_.oneTimeAccountsRead.value,...r,requiresProofOfOwnership:!1}];case D.oneTimeAccountsWithProofOfOwnership:return[...e,{requestType:_.oneTimeAccountsRead.value,...r,requiresProofOfOwnership:!0}];case D.ongoingAccountsWithProofOfOwnership:return[...e,{requestType:_.ongoingAccountsRead.value,...r,requiresProofOfOwnership:!0}];case D.ongoingAccountsWithoutProofOfOwnership:return[...e,{requestType:_.ongoingAccountsRead.value,...r,requiresProofOfOwnership:!1}];default:return[...e,{requestType:Ss.get(n),...r}]}},[])),Nn=t=>(e,n=crypto.randomUUID())=>z({items:e,requestId:n,metadata:t}),Es={...D,...{sendTransaction:"sendTransaction"}},Os=(t,e)=>({request:(s,i={})=>$n(s).andThen(Nn(t)).asyncAndThen(Rn).andThen(e(i)).andThen(In).map(o=>o.items).map(Cn),sendTransaction:(s,i={})=>$n({[Es.sendTransaction]:s}).andThen(Nn(t)).asyncAndThen(Rn).andThen(e(i)).andThen(In).map(o=>o.items).map(Cn)});var jn=(t=>(t.I8="i8",t.I16="i16",t.I32="i32",t.I64="i64",t.I128="i128",t.U8="u8",t.U16="u16",t.U32="u32",t.U64="u64",t.U128="u128",t.Unit="Unit",t.Bool="Bool",t.String="String",t.Enum="Enum",t.Array="Array",t.Tuple="Tuple",t.PackageAddress="PackageAddress",t.ComponentAddress="ComponentAddress",t.ResourceAddress="ResourceAddress",t.SystemAddress="SystemAddress",t.Bucket="Bucket",t.Proof="Proof",t.Expression="Expression",t.Blob="Blob",t.NonFungibleAddress="NonFungibleAddress",t.Hash="Hash",t.EcdsaSecp256k1PublicKey="EcdsaSecp256k1PublicKey",t.EcdsaSecp256k1Signature="EcdsaSecp256k1Signature",t.EddsaEd25519PublicKey="EddsaEd25519PublicKey",t.EddsaEd25519Signature="EddsaEd25519Signature",t.Decimal="Decimal",t.PreciseDecimal="PreciseDecimal",t.NonFungibleId="NonFungibleId",t))(jn||{});class W extends Error{constructor(e){super(e)}}const xs=()=>"()",As=t=>`${t}`,ks=t=>{if(t<-128||t>127)throw new W("Number range exceeded i8");return`${t}i8`},Ps=t=>{if(t<-32768||t>32767)throw new W("Number range exceeded i16");return`${t}i16`},Rs=t=>{if(t<-2147483648||t>2147483647)throw new W("Number range exceeded i32");return`${t}i32`},Is=t=>{const e=BigInt(t);if(e<BigInt("-9223372036854775808")||e>BigInt("9223372036854775807"))throw new W("Number range exceeded i64");return`${t}i64`},Cs=t=>{const e=BigInt(t);if(e<BigInt("-170141183460469231731687303715884105728")||e>BigInt("170141183460469231731687303715884105727"))throw new W("Number range exceeded i128");return`${t}i128`},$s=t=>{if(t<0||t>255)throw new W("Number range exceeded u8");return`${t}u8`},Ns=t=>{if(t<0||t>65535)throw new W("Number range exceeded u16");return`${t}u16`},js=t=>{if(t<0||t>4294967295)throw new W("Number range exceeded u32");return`${t}u32`},Ms=t=>{const e=BigInt(t);if(e<0||e>BigInt("18446744073709551615"))throw new W("Number range exceeded u64");return`${t}u64`},Ls=t=>{const e=BigInt(t);if(e<0||e>BigInt("340282366920938463463374607431768211455"))throw new W("Number range exceeded u128");return`${t}u128`},Us=t=>`"${t}"`,Zs=(t,...e)=>e.length>0?`Enum("${t}",${e.join(",")})`:`Enum("${t}")`,Ds=(...t)=>`Tuple(${t.join(",")})`,Ws=(t,...e)=>(Qs(t,e),`Array<${t}>(${e.join(",")})`),Mn=t=>`PackageAddress("${t}")`,ue=t=>`ComponentAddress("${t}")`,N=t=>`ResourceAddress("${t}")`,qs=t=>`SystemAddress("${t}")`,ge=t=>typeof t=="string"?`Bucket("${t}")`:`Bucket(${t}u32)`,Y=t=>typeof t=="string"?`Proof("${t}")`:`Proof(${t}u32)`,Bs=t=>`Expression("${t}")`,Vs=t=>`Blob("${t}")`,Fs=(t,e)=>`NonFungibleAddress("${t}", ${e})`,zs=t=>`Hash("${t}")`,Hs=t=>`EcdsaSecp256k1PublicKey("${t}")`,Ks=t=>`EcdsaSecp256k1Signature("${t}")`,Ys=t=>`EddsaEd25519PublicKey("${t}")`,Gs=t=>`EddsaEd25519Signature("${t}")`,_e=t=>`Decimal("${t}")`,Js=t=>`PreciseDecimal("${t}")`,Xs=t=>`NonFungibleId(${t})`,Qs=(t,e)=>{if(t==="String"){if(e.some(n=>!n.startsWith('"')&&!n.endsWith('"')))throw new W(`Array<${t}> expects the same type`)}else if(t==="Unit"){if(e.some(n=>n!=="()"))throw new W(`Array<${t}> expects the same type`)}else if(e.some(n=>!n.includes(t)))throw new W(`Array<${t}> expects the same type`)};class ei{constructor(e){Ne(this,"instructions");this.instructions=e}toString(){return this.instructions.join(`
`)}}class ti{constructor(){Ne(this,"instructions");Ne(this,"buckets");Ne(this,"proofs");Ne(this,"id_allocator");this.instructions=[],this.buckets=new Map,this.proofs=new Map,this.id_allocator=512}takeFromWorktop(e,n){return this.instructions.push(`TAKE_FROM_WORKTOP ${N(e)} ${ge(n)};`),this.buckets.set(n,this.id_allocator++),this}takeFromWorktopByAmount(e,n,r){return this.instructions.push(`TAKE_FROM_WORKTOP_BY_AMOUNT ${_e(e)} ${N(n)} ${ge(r)};`),this.buckets.set(r,this.id_allocator++),this}takeFromWorktopByIds(e,n,r){return this.instructions.push(`TAKE_FROM_WORKTOP_BY_IDS ${e} ${N(n)} ${ge(r)};`),this.buckets.set(r,this.id_allocator++),this}returnToWorktop(e){return this.instructions.push(`RETURN_TO_WORKTOP ${ge(e)};`),this}assertWorktopContains(e){return this.instructions.push(`ASSERT_WORKTOP_CONTAINS ${N(e)};`),this}assertWorktopContainsByAmount(e,n){return this.instructions.push(`ASSERT_WORKTOP_CONTAINS_BY_AMOUNT ${_e(e)} ${N(n)};`),this}assertWorktopContainsByIds(e,n){return this.instructions.push(`ASSERT_WORKTOP_CONTAINS_BY_IDS ${e} ${N(n)};`),this}popFromAuthZone(e){return this.instructions.push(`POP_FROM_AUTH_ZONE ${Y(e)};`),this.proofs.set(e,this.id_allocator++),this}pushToAuthZone(e){return this.instructions.push(`PUSH_TO_AUTH_ZONE ${Y(e)};`),this}clearAuthZone(){return this.instructions.push("CLEAR_AUTH_ZONE;"),this}createProofFromAuthZone(e,n){return this.instructions.push(`CREATE_PROOF_FROM_AUTH_ZONE ${N(e)} ${Y(n)};`),this.proofs.set(n,this.id_allocator++),this}createProofFromAuthZoneByAmount(e,n,r){return this.instructions.push(`CREATE_PROOF_FROM_AUTH_ZONE_BY_AMOUNT ${_e(e)} ${N(n)} ${Y(r)};`),this.proofs.set(r,this.id_allocator++),this}createProofFromAuthZoneByIds(e,n,r){return this.instructions.push(`CREATE_PROOF_FROM_AUTH_ZONE_BY_IDS ${e} ${N(n)} ${Y(r)};`),this.proofs.set(r,this.id_allocator++),this}createProofFromBucket(e,n){return this.instructions.push(`CREATE_PROOF_FROM_BUCKET ${ge(e)} ${Y(n)};`),this.proofs.set(n,this.id_allocator++),this}cloneProof(e,n){return this.instructions.push(`CLONE_PROOF ${Y(e)} ${Y(n)};`),this.proofs.set(n,this.id_allocator++),this}dropProof(e){return this.instructions.push(`DROP_PROOF ${Y(e)};`),this}callFunction(e,n,r,s){return this.instructions.push(`CALL_FUNCTION ${Mn(e)} "${n}" "${r}" ${s.join(" ")};`),this}callMethod(e,n,r){return this.instructions.push(`CALL_METHOD ${ue(e)} "${n}" ${r.join(" ")};`),this}callNativeFunction(e,n,r){return this.instructions.push('CALL_NATIVE_FUNCTION "'+e+'" "'+n+'" '+r.join(" ")+";"),this}callNativeMethod(e,n,r){return this.instructions.push("CALL_NATIVE_METHOD "+e+' "'+n+'" '+r.join(" ")+";"),this}publishPackageWithOwner(e,n,r){return this.instructions.push('PUBLISH_PACKAGE_WITH_OWNER Blob("'+e+'") Blob("'+n+'") '+r+";"),this}createResource(e,n,r,s){return this.instructions.push(`CREATE_RESOURCE ${e} ${n} ${r} ${s};`),this}burnBucket(e){return this.instructions.push(`BURN_BUCKET ${ge(e)};`),this}mintFungible(e,n){return this.instructions.push(`MINT_FUNGIBLE ${N(e)} ${_e(n)};`),this}withdrawFromAccount(e,n){return this.instructions.push(`CALL_METHOD ${ue(e)} "withdraw" ${N(n)};`),this}withdrawFromAccountByAmount(e,n,r){return this.instructions.push(`CALL_METHOD ${ue(e)} "withdraw_by_amount" ${_e(n)} ${N(r)};`),this}withdrawFromAccountByIds(e,n,r){return this.instructions.push(`CALL_METHOD ${ue(e)} "withdraw_by_ids" ${n} ${N(r)};`),this}createProofFromAccount(e,n){return this.instructions.push(`CALL_METHOD ${ue(e)} "create_proof" ${N(n)};`),this}createProofFromAccountByAmount(e,n,r){return this.instructions.push(`CALL_METHOD ${ue(e)} "create_proof_by_amount" ${_e(n)} ${N(r)};`),this}createProofFromAccountByIds(e,n,r){return this.instructions.push(`CALL_METHOD ${ue(e)} "create_proof_by_ids" ${n} ${N(r)};`),this}build(){return new ei(this.instructions)}}var ni="Expected a function",ri=9007199254740991,si="[object Arguments]",ii="[object Function]",oi="[object GeneratorFunction]",ai=typeof Le=="object"&&Le&&Le.Object===Object&&Le,ui=typeof self=="object"&&self&&self.Object===Object&&self,ci=ai||ui||Function("return this")();function li(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function di(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var jt=Object.prototype,fi=jt.hasOwnProperty,Ln=jt.toString,Un=ci.Symbol,hi=jt.propertyIsEnumerable,Zn=Un?Un.isConcatSpreadable:void 0,Dn=Math.max;function Wn(t,e,n,r,s){var i=-1,o=t.length;for(n||(n=yi),s||(s=[]);++i<o;){var a=t[i];e>0&&n(a)?e>1?Wn(a,e-1,n,r,s):di(s,a):r||(s[s.length]=a)}return s}function pi(t,e){return e=Dn(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=Dn(n.length-e,0),i=Array(s);++r<s;)i[r]=n[e+r];r=-1;for(var o=Array(e+1);++r<e;)o[r]=n[r];return o[e]=i,li(t,this,o)}}function mi(t){return pi(function(e){e=Wn(e,1);var n=e.length,r=n;for(t&&e.reverse();r--;)if(typeof e[r]!="function")throw new TypeError(ni);return function(){for(var s=0,i=n?e[s].apply(this,arguments):arguments[0];++s<n;)i=e[s].call(this,i);return i}})}function yi(t){return gi(t)||vi(t)||!!(Zn&&t&&t[Zn])}function vi(t){return bi(t)&&fi.call(t,"callee")&&(!hi.call(t,"callee")||Ln.call(t)==si)}var gi=Array.isArray;function _i(t){return t!=null&&Ti(t.length)&&!wi(t)}function bi(t){return Ei(t)&&_i(t)}function wi(t){var e=Si(t)?Ln.call(t):"";return e==ii||e==oi}function Ti(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ri}function Si(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Ei(t){return!!t&&typeof t=="object"}var Oi=mi(),xi=Oi;function Ai(...t){return xi(t)({})}const ki={oneTimeAccounts:{withoutProofOfOwnership:t=>e=>({...e,oneTimeAccountsWithoutProofOfOwnership:{numberOfAccounts:t}}),withProofOfOwnership:t=>e=>({...e,oneTimeAccountsWithProofOfOwnership:{numberOfAccounts:t}})},ongoingAccounts:{withoutProofOfOwnership:t=>e=>({...e,ongoingAccountsWithoutProofOfOwnership:{numberOfAccounts:t}}),withProofOfOwnership:t=>e=>({...e,ongoingAccountsWithProofOfOwnership:{numberOfAccounts:t}})},oneTimePersonaData:(...t)=>e=>({...e,oneTimePersonaData:{fields:t}}),ongoingPersonaData:(...t)=>e=>({...e,ongoingPersonaData:{fields:t}}),login:{withoutChallenge:()=>t=>({...t,loginWithoutChallenge:{}}),withChallenge:t=>e=>({...e,loginWithChallenge:{challenge:t}})},usePersona:t=>e=>({...e,usePersona:{id:t}})},qn={Mainnet:1,Stokenet:2,Adapanet:10,Nebunet:11,Gilganet:32,Enkinet:33,Hammunet:34},Pi=({networkId:t=qn.Mainnet,dAppId:e,logLevel:n=_n.logLevel})=>{G.setLevel(n),G.debug("ðŸ”µ wallet sdk instantiated");const r=Ur(),s=()=>{G.debug("ðŸ”µðŸ§¹ destroying wallet sdk instance"),r.destroy()};return{...Os({networkId:t,dAppId:e},Hr(r.subjects)),destroy:s,__subjects:r.subjects}};p.Array=Ws,p.Blob=Vs,p.Bool=As,p.Bucket=ge,p.ComponentAddress=ue,p.Decimal=_e,p.EcdsaSecp256k1PublicKey=Hs,p.EcdsaSecp256k1Signature=Ks,p.EddsaEd25519PublicKey=Ys,p.EddsaEd25519Signature=Gs,p.Enum=Zs,p.Expression=Bs,p.Hash=zs,p.I128=Cs,p.I16=Ps,p.I32=Rs,p.I64=Is,p.I8=ks,p.ManifestBuilder=ti,p.Network=qn,p.NonFungibleAddress=Fs,p.NonFungibleId=Xs,p.PackageAddress=Mn,p.PreciseDecimal=Js,p.Proof=Y,p.ResourceAddress=N,p.ScryptoValueError=W,p.String=Us,p.SystemAddress=qs,p.Tuple=Ds,p.TypeId=jn,p.U128=Ls,p.U16=Ns,p.U32=js,p.U64=Ms,p.U8=$s,p.Unit=xs,p.default=Pi,p.requestBuilder=Ai,p.requestItem=ki,Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
